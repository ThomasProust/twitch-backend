swagger: "2.0"
info:
  title: Twitch Real Time Viewer Tracker API
  description: Server that consumes Twitch's API to collect and aggregate data from specific games
  version: 1.0.0
paths:
  /games:
    get:
      summary: Returns a list of games
      description: Fetches a list of game from the database
      produces:
        - application/json
      tags:
        - games
      responses:
        200:
          description: ok
          schema:
            type: array
            items:
              $ref: '#/definitions/Game'
    post:
      summary: Creates a game
      description: Create a new game inside the database
      consumes:
        - application/json
      parameters:
        - in: body
          name: game
          description: the game to create
          schema:
            type: object
            required:
              - name
            properties:
              name:
                type: string
      tags:
        - games
      produces:
        - application/json
      responses:
        201:
          description: ok
          schema:
            $ref: '#/definitions/Game'
        404:
          description: Game is not referenced on Twitch
          schema:
            type: object
            properties:
              message:
                type: string
        422:
          description: Game already exists in Database
          schema:
            type: object
            properties:
              message:
                type: string

  /games/{twitchId}:
    get:
      summary: Returns the details of a game
      description: Fetches a specific game from the database
      tags:
        - games
      produces:
        - application/json
      parameters:
        - in: path
          name: twitchId
          type: string
          description: The twitch ID of the game to fetch
          required: true
      responses:
        200:
          description: ok
          schema:
            $ref: '#/definitions/Game'

    delete:
      summary: Deletes a game
      description: Delete a given game from the database
      tags:
        - games
      consumes:
        - application/json
      parameters:
        - in : path
          name: twitchId
          description: the twitch ID of the game to delete
          required: true
          type: string
      produces:
        - application/json
      responses:
        204:
          description: ok
          type: object

  /snapshots:
    get:
      summary: Get the list of all the snapshots taken
      description: Fetches the whole list of snapshots from the database
      tags:
        - snapshots
      produces:
        - application/json
      responses:
        200:
          description: ok
          schema:
            type: array
            items:
              $ref: '#/definitions/Snapshot'
        404:
          description: No Snapshot exists for the specified gameId
          schema:
            type: object
            properties:
              message:
                type: string

definitions:
  Game:
    type: object
    properties:
      twitchId:
        type: integer
        description: The game's twitch ID.
      name:
        type: string
        description: The name of the game.
      boxArtUrl:
        type: string
        description: The url for the box art of the game.

  Snapshot:
    type: object
    properties:
      gameId:
        type: integer
        description: The id of the game the snapshot is of
      timestamp:
        type: date
        description: The time the snapshot was taken
      viewers:
        type: integer
        description: The total number of viewers accounted at the time of the snapshot
      


